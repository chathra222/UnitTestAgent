ğŸ¯ Your Goal:
"A developer pushes code to GitHub. A Bedrock-powered agent is triggered, analyzes the code changes, reasons about what needs to be tested, generates pytest test cases, and autonomously opens a pull request."


[1] Developer Pushes Code to GitHub âœ…
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[2] GitHub Webhook â†’ API Gateway â†’ Lambda 
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[3] Lambda filters the changes required unit tests
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[4] Lambda invokes the agent and commit info and relevant context (e.g., file paths, commit message) to Bedrock Agent(invoke_agent)
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[5] Bedrock Agent calls 
  - get_file_content - action group
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
  - generate test cases
  â€ƒ        â†“
  - creates a new branch
           â†“
  - commit the generated test cases
           â†“
â€ƒâ€ƒ- create a pull request
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[7] GitHub CI/CD pipeline runs pytest on the new branch
â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ†“
[8] Developer reviews and merges the PR



ğŸ§  Why This Demo Is Agentic
âœ”ï¸ Autonomy: no user prompt required
âœ”ï¸ Tool use: GitHub APIs + Bedrock
âœ”ï¸ Action loop: reason â†’ generate â†’ act â†’ validate
âœ”ï¸ Multi-modal: uses raw code + structured metadata


ğŸ¥ Demo Storyboard (Live or Slide)
Frame	                                       What You Show
ğŸ‘¨â€ğŸ’» 1. Dev commits to feature/register-user	git push origin feature/register-user
ğŸ” 2. Webhook triggers your Lambda	         (show CloudWatch logs)
ğŸ§  3. Lambda gets diff + symbols	         
ğŸ§  4. Bedrock generates test	             show Claude test output
ğŸ§¾ 5. Lambda opens PR on GitHub	             auto-generated test file
ğŸ§ª 6. CI runs pytest â†’ green âœ…	            test passes
âœ… 7. Dev merges PR	                        done



ğŸ§± Folder Structure (IaC + Code)

bedrock-auto-tester/
â”œâ”€â”€ bedrock-agent/
â”‚   â”œâ”€â”€ instructions.md               # Bedrock Agent prompt instructions
â”‚   â””â”€â”€ knowledge_base/               # Optional KB (e.g., testing patterns, sample test cases)
â”‚       â””â”€â”€ test_examples.txt
â”‚
â”œâ”€â”€ lambda/
â”‚   â”œâ”€â”€ handler.py                    # Main Lambda function
â”‚   â”œâ”€â”€ github_compare.py            # Logic to query GitHub Compare API
â”‚   â”œâ”€â”€ bedrock_client.py            # Logic to call Bedrock Agent
â”‚   â”œâ”€â”€ pr_creator.py                # GitHub PR creation logic
â”‚   â””â”€â”€ utils.py                     # Common utilities (e.g., token parsing, logging)
â”‚
â”œâ”€â”€ deployment/
â”‚   â”œâ”€â”€ terraform/                    # Terraform for AWS infra (API Gateway, Lambda, IAM)
â”‚   â”‚   â”œâ”€â”€ main.tf
â”‚   â”‚   â””â”€â”€ variables.tf
â”‚   â””â”€â”€ layer/                        # Optional Lambda layer for Python packages
â”‚       â””â”€â”€ python/
â”‚           â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ test/
â”‚   â””â”€â”€ sample_code_push.json        # Sample GitHub webhook payload for local testing
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml                   # GitHub Actions pipeline to run pytest
â”‚
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt                 # Python dependencies for local testing

